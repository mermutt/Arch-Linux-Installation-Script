---
- block:
  # root

  - name: "Set locale in /etc/locale.gen"
    lineinfile:
      path: /etc/locale.gen
      regexp: '^#{{ locale }} UTF-8'
      line: "{{ locale }} UTF-8"

  - name: "Create /etc/locale.conf"
    shell:
      cmd: |
        echo "LANG={{ lang }}" > /etc/locale.conf
    args:
      executable: /bin/bash

  - name: "Create /etc/vconsole.conf"
    shell:
      cmd: |
        echo "KEYMAP={{ keymap }}" > /etc/vconsole.conf
    args:
      executable: /bin/bash

  - name: "Generate locale"
    command:
      cmd: "locale-gen"

  become: true
